import can
import time
#
# Ustawienia dla interfejsu Vector
channel_send = 0  # Numer kanału do wysyłania
bitrate = 500000   # Ustaw bitrate na 500 kbps

ramki = 20

# Inicjalizacja interfejsu CAN do wysyłania
bus_send = can.interface.Bus(channel=channel_send, interface='vector', bitrate=bitrate)

# Funkcja do wysyłania ramek
def send_can_frames():
    start_id = 0x0  # Początkowe ID
    while start_id <= 0x19FFFFFF:
        for i in range(ramki):
            # Tworzenie ramki bez danych
            message_to_send = can.Message(arbitration_id=start_id + i, data=[], is_extended_id=True)
            try:
                bus_send.send(message_to_send)
                print(f"Wysłano ramkę: {hex(start_id)}")
            except can.CanError:
                print("Błąd podczas wysyłania ramki.")
        start_id += ramki  # Inkrementacja ID o 5
        time.sleep(0.005)  # Czekaj 5 ms

if __name__ == "__main__":
    send_can_frames()
    bus_send.shutdown()